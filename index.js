"use strict";
/**
 * Created by user on 2018/1/31/031.
 */
Object.defineProperty(exports, "__esModule", { value: true });
const regexp_parser_event_1 = require("regexp-parser-event");
exports.ParserEventEmitter = regexp_parser_event_1.ParserEventEmitter;
const core_1 = require("./lib/core");
const regexp_helper_1 = require("regexp-helper");
exports.isRegExp = regexp_helper_1.isRegExp;
const RegexpHelper = require("regexp-helper");
const mergeOptions_1 = require("./lib/mergeOptions");
const getSource_1 = require("./lib/getSource");
exports.parseRegularExpressionString = getSource_1.parseRegularExpressionString;
/**
 * @deprecated
 */
exports.defaultOptions = {};
class zhRegExp extends RegExp {
    constructor(str, ...argv) {
        let { source, flags } = core_1.coreHandler(str, ...argv);
        super(source, flags);
    }
    /**
     * create a new zhRegExp class with default value
     * @example `zhRegExp.use(defaultOptions)`
     */
    static use(defaultOptions) {
        defaultOptions = mergeOptions_1.default({}, this[core_1.SymDefaults], defaultOptions);
        const zhRegExpNew = new Proxy(zhRegExp, {
            // @ts-ignore
            construct(target, argArray, newTarget) {
                let { str, flags, options, argv } = mergeOptions_1.getSettingOptions(...argArray);
                options = mergeOptions_1.default({}, defaultOptions, options);
                return new zhRegExp(str, flags, options, ...argv);
            },
            // @ts-ignore
            get(target, key) {
                if (key === core_1.SymDefaults) {
                    return defaultOptions;
                }
                return target[key];
            },
        });
        return zhRegExpNew;
    }
    static create(str, flags = null, skip, ...argv) {
        return new this(str, flags, skip, ...argv);
    }
    getStatic() {
        return Object.getPrototypeOf(this);
    }
    /**
     * @todo
     */
    toRegularExpressionString() {
        return this.toString();
        //return `/${this.source}/${this.flags}`;
    }
    static parseRegularExpressionString(str) {
        return getSource_1.parseRegularExpressionString(str);
    }
    static get support() {
        return require('regexp-support').default;
    }
    static get version() {
        return require('./package.json').version;
    }
}
exports.zhRegExp = zhRegExp;
(function (zhRegExp) {
    zhRegExp.isRegExp = RegexpHelper.isRegExp;
})(zhRegExp = exports.zhRegExp || (exports.zhRegExp = {}));
exports.create = zhRegExp.create.bind(zhRegExp);
Object.defineProperty(exports, "version", {
    get() {
        return require('./package.json').version;
    }
});
exports.default = zhRegExp;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUE7O0dBRUc7O0FBR0gsNkRBSzZCO0FBbUJLLDZCQXJCakMsd0NBQWtCLENBcUJpQztBQWpCcEQscUNBU29CO0FBQ3BCLGlEQUF5QztBQStKaEMsbUJBL0pBLHdCQUFRLENBK0pBO0FBNUpqQiw4Q0FBOEM7QUFDOUMscURBQXFFO0FBQ3JFLCtDQUErRDtBQTBKNUMsdUNBMUpWLHdDQUE0QixDQTBKVTtBQWxKL0M7O0dBRUc7QUFDVSxRQUFBLGNBQWMsR0FBYSxFQUFFLENBQUM7QUFFM0MsTUFBYSxRQUFTLFNBQVEsTUFBTTtJQTBGbkMsWUFBWSxHQUFHLEVBQUUsR0FBRyxJQUFJO1FBRXZCLElBQUksRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLEdBQUcsa0JBQVcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQztRQUVsRCxLQUFLLENBQUMsTUFBTSxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ3RCLENBQUM7SUE1Q0Q7OztPQUdHO0lBQ0gsTUFBTSxDQUFDLEdBQUcsQ0FBQyxjQUE2QjtRQUV2QyxjQUFjLEdBQUcsc0JBQVksQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLGtCQUFXLENBQUMsRUFBRSxjQUFjLENBQUMsQ0FBQztRQUVyRSxNQUFNLFdBQVcsR0FBRyxJQUFJLEtBQUssQ0FBQyxRQUFRLEVBQUU7WUFDdkMsYUFBYTtZQUNiLFNBQVMsQ0FBQyxNQUF1QixFQUFFLFFBQWlCLEVBQUUsU0FBZTtnQkFFcEUsSUFBSSxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRSxHQUFHLGdDQUFpQixDQUFDLEdBQUcsUUFBbUMsQ0FBQyxDQUFDO2dCQUU5RixPQUFPLEdBQUcsc0JBQVksQ0FBQyxFQUFFLEVBQUUsY0FBYyxFQUFFLE9BQU8sQ0FBQyxDQUFDO2dCQUVwRCxPQUFPLElBQUksUUFBUSxDQUFDLEdBQUcsRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUM7WUFDbkQsQ0FBQztZQUVELGFBQWE7WUFDYixHQUFHLENBQUMsTUFBc0IsRUFBRSxHQUF1QztnQkFFbEUsSUFBSSxHQUFHLEtBQUssa0JBQVcsRUFDdkI7b0JBQ0MsT0FBTyxjQUFjLENBQUE7aUJBQ3JCO2dCQUVELE9BQU8sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ3BCLENBQUM7U0FFRCxDQUFDLENBQUM7UUFFSCxPQUFPLFdBQVcsQ0FBQTtJQUNuQixDQUFDO0lBZUQsTUFBTSxDQUFDLE1BQU0sQ0FBZSxHQUFHLEVBQUUsS0FBSyxHQUFHLElBQUksRUFBRSxJQUFLLEVBQUUsR0FBRyxJQUFJO1FBRTVELE9BQU8sSUFBSSxJQUFJLENBQUMsR0FBRyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsQ0FBQztJQUM1QyxDQUFDO0lBRUQsU0FBUztRQUVSLE9BQU8sTUFBTSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUNwQyxDQUFDO0lBRUQ7O09BRUc7SUFDSCx5QkFBeUI7UUFFeEIsT0FBTyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDdkIseUNBQXlDO0lBQzFDLENBQUM7SUFFRCxNQUFNLENBQUMsNEJBQTRCLENBQUMsR0FBVztRQUU5QyxPQUFPLHdDQUE0QixDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQzFDLENBQUM7SUFFRCxNQUFNLEtBQUssT0FBTztRQUVqQixPQUFPLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLE9BQWtELENBQUM7SUFDckYsQ0FBQztJQUVELE1BQU0sS0FBSyxPQUFPO1FBRWpCLE9BQU8sT0FBTyxDQUFDLGdCQUFnQixDQUFDLENBQUMsT0FBTyxDQUFBO0lBQ3pDLENBQUM7Q0FDRDtBQXBJRCw0QkFvSUM7QUFFRCxXQUFpQixRQUFRO0lBRVYsaUJBQVEsR0FBRyxZQUFZLENBQUMsUUFBUSxDQUFDO0FBQ2hELENBQUMsRUFIZ0IsUUFBUSxHQUFSLGdCQUFRLEtBQVIsZ0JBQVEsUUFHeEI7QUFFWSxRQUFBLE1BQU0sR0FBRyxRQUFRLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQTJCLENBQUM7QUFhL0UsTUFBTSxDQUFDLGNBQWMsQ0FBQyxPQUFPLEVBQUUsU0FBUyxFQUFFO0lBQ3pDLEdBQUc7UUFFRixPQUFPLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLE9BQU8sQ0FBQTtJQUN6QyxDQUFDO0NBQ0QsQ0FBQyxDQUFDO0FBRUgsa0JBQWUsUUFBUSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IHVzZXIgb24gMjAxOC8xLzMxLzAzMS5cbiAqL1xuXG5pbXBvcnQgeyBJQXN0VG9TdHJpbmdPcHRpb25zIH0gZnJvbSAncmVnZXhwLXBhcnNlci1saXRlcmFsJztcbmltcG9ydCB7XG5cdElOb2RlSW5wdXQsXG5cdElQYXJzZXJFdmVudEVtaXR0ZXJMaXN0ZW5lcixcblx0UGFyc2VyRXZlbnRFbWl0dGVyLFxuXHRQYXJzZXJFdmVudEVtaXR0ZXJFdmVudCxcbn0gZnJvbSAncmVnZXhwLXBhcnNlci1ldmVudCc7XG5pbXBvcnQgX3N1cHBvcnQgZnJvbSAncmVnZXhwLXN1cHBvcnQnO1xuaW1wb3J0IHtcblx0Y29yZUhhbmRsZXIsXG5cdElDb3JlSGFuZGxlclJldHVybixcblx0SU9wdGlvbnMsXG5cdElPcHRpb25zQ29yZSxcblx0SU9wdGlvbnNJbnB1dCxcblx0SU9wdGlvbnNPbixcblx0SU9wdGlvbnNSdW50aW1lLCBJUmVnRXhwVXNlcklucHV0LFxuXHRTeW1EZWZhdWx0cyxcbn0gZnJvbSAnLi9saWIvY29yZSc7XG5pbXBvcnQgeyBpc1JlZ0V4cCB9IGZyb20gJ3JlZ2V4cC1oZWxwZXInO1xuaW1wb3J0IHsgSU9wdGlvbnMgYXMgSU9wdGlvbnNaaFRhYmxlIH0gZnJvbSAnY2prLWNvbnYvbGliL3poL3RhYmxlL2luZGV4JztcbmltcG9ydCBtZXJnZSBmcm9tICdsb2Rhc2gvbWVyZ2UnO1xuaW1wb3J0ICogYXMgUmVnZXhwSGVscGVyIGZyb20gJ3JlZ2V4cC1oZWxwZXInO1xuaW1wb3J0IG1lcmdlT3B0aW9ucywgeyBnZXRTZXR0aW5nT3B0aW9ucyB9IGZyb20gJy4vbGliL21lcmdlT3B0aW9ucyc7XG5pbXBvcnQgeyBwYXJzZVJlZ3VsYXJFeHByZXNzaW9uU3RyaW5nIH0gZnJvbSAnLi9saWIvZ2V0U291cmNlJztcblxuZXhwb3J0IHsgUGFyc2VyRXZlbnRFbWl0dGVyRXZlbnQsIFBhcnNlckV2ZW50RW1pdHRlciwgSU5vZGVJbnB1dCwgSVBhcnNlckV2ZW50RW1pdHRlckxpc3RlbmVyLCBJQXN0VG9TdHJpbmdPcHRpb25zIH1cblxuZXhwb3J0IHsgSU9wdGlvbnMsIElPcHRpb25zUnVudGltZSwgSU9wdGlvbnNJbnB1dCwgSUNvcmVIYW5kbGVyUmV0dXJuLCBJT3B0aW9uc09uLCBJT3B0aW9uc0NvcmUgfVxuXG5leHBvcnQgeyBJT3B0aW9uc1poVGFibGUgfVxuXG4vKipcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCBjb25zdCBkZWZhdWx0T3B0aW9uczogSU9wdGlvbnMgPSB7fTtcblxuZXhwb3J0IGNsYXNzIHpoUmVnRXhwIGV4dGVuZHMgUmVnRXhwXG57XG5cdHB1YmxpYyBzb3VyY2U6IHN0cmluZztcblx0cHVibGljIGZsYWdzOiBzdHJpbmc7XG5cblx0cHVibGljIGRvdEFsbDogYm9vbGVhbjtcblxuXHRwdWJsaWMgaWdub3JlQ2FzZTogYm9vbGVhbjtcblx0cHVibGljIGdsb2JhbDogYm9vbGVhbjtcblx0cHVibGljIG11bHRpbGluZTogYm9vbGVhbjtcblx0cHVibGljIHN0aWNreTogYm9vbGVhbjtcblx0cHVibGljIHVuaWNvZGU6IGJvb2xlYW47XG5cblx0cHVibGljIGxhc3RJbmRleDogbnVtYmVyO1xuXG5cdC8qKlxuXHQgKiBUaGUgbm9uLXN0YW5kYXJkIGxlZnRDb250ZXh0IHByb3BlcnR5IGlzIGEgc3RhdGljIGFuZCByZWFkLW9ubHkgcHJvcGVydHkgb2YgcmVndWxhciBleHByZXNzaW9ucyB0aGF0IGNvbnRhaW5zIHRoZSBzdWJzdHJpbmcgcHJlY2VkaW5nIHRoZSBtb3N0IHJlY2VudCBtYXRjaC4gUmVnRXhwLiRgIGlzIGFuIGFsaWFzIGZvciB0aGlzIHByb3BlcnR5LlxuXHQgKlxuXHQgKiBAYWxpYXMgJGBcblx0ICovXG5cdHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgbGVmdENvbnRleHQ6IHN0cmluZztcblx0LyoqXG5cdCAqIFRoZSBub24tc3RhbmRhcmQgcmlnaHRDb250ZXh0IHByb3BlcnR5IGlzIGEgc3RhdGljIGFuZCByZWFkLW9ubHkgcHJvcGVydHkgb2YgcmVndWxhciBleHByZXNzaW9ucyB0aGF0IGNvbnRhaW5zIHRoZSBzdWJzdHJpbmcgZm9sbG93aW5nIHRoZSBtb3N0IHJlY2VudCBtYXRjaC4gUmVnRXhwLiQnIGlzIGFuIGFsaWFzIGZvciB0aGlzIHByb3BlcnR5LlxuXHQgKlxuXHQgKiBAYWxpYXMgJCdcblx0ICovXG5cdHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgcmlnaHRDb250ZXh0OiBzdHJpbmc7XG5cdC8qKlxuXHQgKiBUaGUgbm9uLXN0YW5kYXJkIGxhc3RQYXJlbiBwcm9wZXJ0eSBpcyBhIHN0YXRpYyBhbmQgcmVhZC1vbmx5IHByb3BlcnR5IG9mIHJlZ3VsYXIgZXhwcmVzc2lvbnMgdGhhdCBjb250YWlucyB0aGUgbGFzdCBwYXJlbnRoZXNpemVkIHN1YnN0cmluZyBtYXRjaCwgaWYgYW55LiBSZWdFeHAuJCsgaXMgYW4gYWxpYXMgZm9yIHRoaXMgcHJvcGVydHkuXG5cdCAqXG5cdCAqIEBhbGlhcyAkK1xuXHQgKi9cblx0cHVibGljIHN0YXRpYyByZWFkb25seSBsYXN0UGFyZW46IHN0cmluZztcblx0LyoqXG5cdCAqIFRoZSBub24tc3RhbmRhcmQgbGFzdE1hdGNoIHByb3BlcnR5IGlzIGEgc3RhdGljIGFuZCByZWFkLW9ubHkgcHJvcGVydHkgb2YgcmVndWxhciBleHByZXNzaW9ucyB0aGF0IGNvbnRhaW5zIHRoZSBsYXN0IG1hdGNoZWQgY2hhcmFjdGVycy4gUmVnRXhwLiQmIGlzIGFuIGFsaWFzIGZvciB0aGlzIHByb3BlcnR5LlxuXHQgKlxuXHQgKiBAYWxpYXMgJCZcblx0ICovXG5cdHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgbGFzdE1hdGNoOiBzdHJpbmc7XG5cdC8qKlxuXHQgKiBUaGUgbm9uLXN0YW5kYXJkIGlucHV0IHByb3BlcnR5IGlzIGEgc3RhdGljIHByb3BlcnR5IG9mIHJlZ3VsYXIgZXhwcmVzc2lvbnMgdGhhdCBjb250YWlucyB0aGUgc3RyaW5nIGFnYWluc3Qgd2hpY2ggYSByZWd1bGFyIGV4cHJlc3Npb24gaXMgbWF0Y2hlZC4gUmVnRXhwLiRfIGlzIGFuIGFsaWFzIGZvciB0aGlzIHByb3BlcnR5LlxuXHQgKlxuXHQgKiBAYWxpYXMgJF9cblx0ICovXG5cdHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgaW5wdXQ6IHN0cmluZztcblxuXHQvKipcblx0ICogZGVmYXVsdCB2YWx1ZSBvbmx5IGV4aXN0cyBhbmQgd29yayB3aGVuIHVzZSBgemhSZWdFeHAudXNlKGRlZmF1bHRPcHRpb25zKWBcblx0ICovXG5cdHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgW1N5bURlZmF1bHRzXTogSU9wdGlvbnNJbnB1dDtcblxuXHQvKipcblx0ICogY3JlYXRlIGEgbmV3IHpoUmVnRXhwIGNsYXNzIHdpdGggZGVmYXVsdCB2YWx1ZVxuXHQgKiBAZXhhbXBsZSBgemhSZWdFeHAudXNlKGRlZmF1bHRPcHRpb25zKWBcblx0ICovXG5cdHN0YXRpYyB1c2UoZGVmYXVsdE9wdGlvbnM6IElPcHRpb25zSW5wdXQpOiB0eXBlb2YgemhSZWdFeHBcblx0e1xuXHRcdGRlZmF1bHRPcHRpb25zID0gbWVyZ2VPcHRpb25zKHt9LCB0aGlzW1N5bURlZmF1bHRzXSwgZGVmYXVsdE9wdGlvbnMpO1xuXG5cdFx0Y29uc3QgemhSZWdFeHBOZXcgPSBuZXcgUHJveHkoemhSZWdFeHAsIHtcblx0XHRcdC8vIEB0cy1pZ25vcmVcblx0XHRcdGNvbnN0cnVjdCh0YXJnZXQ6IHR5cGVvZiB6aFJlZ0V4cCwgYXJnQXJyYXk6IHVua25vd24sIG5ld1RhcmdldD86IGFueSlcblx0XHRcdHtcblx0XHRcdFx0bGV0IHsgc3RyLCBmbGFncywgb3B0aW9ucywgYXJndiB9ID0gZ2V0U2V0dGluZ09wdGlvbnMoLi4uYXJnQXJyYXkgYXMgW0lSZWdFeHBVc2VySW5wdXQsIGFueV0pO1xuXG5cdFx0XHRcdG9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoe30sIGRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcblxuXHRcdFx0XHRyZXR1cm4gbmV3IHpoUmVnRXhwKHN0ciwgZmxhZ3MsIG9wdGlvbnMsIC4uLmFyZ3YpO1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gQHRzLWlnbm9yZVxuXHRcdFx0Z2V0KHRhcmdldDoga2V5b2YgemhSZWdFeHAsIGtleToga2V5b2YgemhSZWdFeHAgfHR5cGVvZiBTeW1EZWZhdWx0cylcblx0XHRcdHtcblx0XHRcdFx0aWYgKGtleSA9PT0gU3ltRGVmYXVsdHMpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHRyZXR1cm4gZGVmYXVsdE9wdGlvbnNcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiB0YXJnZXRba2V5XTtcblx0XHRcdH0sXG5cblx0XHR9KTtcblxuXHRcdHJldHVybiB6aFJlZ0V4cE5ld1xuXHR9XG5cblx0Y29uc3RydWN0b3Ioc3RyOiBJUmVnRXhwVXNlcklucHV0LCBvcHRpb25zPzogSU9wdGlvbnNJbnB1dCwgLi4uYXJndilcblx0Y29uc3RydWN0b3Ioc3RyOiBJUmVnRXhwVXNlcklucHV0LCBmbGFncz86IHN0cmluZywgb3B0aW9ucz86IElPcHRpb25zSW5wdXQsIC4uLmFyZ3YpXG5cdGNvbnN0cnVjdG9yKHN0cjogSVJlZ0V4cFVzZXJJbnB1dCwgZmxhZ3M6IHN0cmluZywgc2tpcDogc3RyaW5nLCAuLi5hcmd2KVxuXHRjb25zdHJ1Y3RvcihzdHI6IElSZWdFeHBVc2VySW5wdXQsIGZsYWdzOiBzdHJpbmcsIG9wdGlvbnM/OiBJT3B0aW9uc0lucHV0IHwgc3RyaW5nLCAuLi5hcmd2KVxuXHRjb25zdHJ1Y3RvcihzdHIsIC4uLmFyZ3YpXG5cdHtcblx0XHRsZXQgeyBzb3VyY2UsIGZsYWdzIH0gPSBjb3JlSGFuZGxlcihzdHIsIC4uLmFyZ3YpO1xuXG5cdFx0c3VwZXIoc291cmNlLCBmbGFncyk7XG5cdH1cblxuXHRzdGF0aWMgY3JlYXRlPFQgPSB6aFJlZ0V4cD4oc3RyOiBJUmVnRXhwVXNlcklucHV0LCBmbGFncz86IHN0cmluZywgb3B0aW9ucz86IElPcHRpb25zSW5wdXQgfCBzdHJpbmcpOiBUXG5cdHN0YXRpYyBjcmVhdGU8VCA9IHpoUmVnRXhwPihzdHI6IElSZWdFeHBVc2VySW5wdXQsIG9wdGlvbnM/OiBJT3B0aW9uc0lucHV0KTogVFxuXHRzdGF0aWMgY3JlYXRlPFQgPSB6aFJlZ0V4cD4oc3RyLCBmbGFncyA9IG51bGwsIHNraXA/LCAuLi5hcmd2KVxuXHR7XG5cdFx0cmV0dXJuIG5ldyB0aGlzKHN0ciwgZmxhZ3MsIHNraXAsIC4uLmFyZ3YpO1xuXHR9XG5cblx0Z2V0U3RhdGljPFQgPSB0eXBlb2YgemhSZWdFeHA+KCk6IFRcblx0e1xuXHRcdHJldHVybiBPYmplY3QuZ2V0UHJvdG90eXBlT2YodGhpcyk7XG5cdH1cblxuXHQvKipcblx0ICogQHRvZG9cblx0ICovXG5cdHRvUmVndWxhckV4cHJlc3Npb25TdHJpbmcoKVxuXHR7XG5cdFx0cmV0dXJuIHRoaXMudG9TdHJpbmcoKTtcblx0XHQvL3JldHVybiBgLyR7dGhpcy5zb3VyY2V9LyR7dGhpcy5mbGFnc31gO1xuXHR9XG5cblx0c3RhdGljIHBhcnNlUmVndWxhckV4cHJlc3Npb25TdHJpbmcoc3RyOiBzdHJpbmcpXG5cdHtcblx0XHRyZXR1cm4gcGFyc2VSZWd1bGFyRXhwcmVzc2lvblN0cmluZyhzdHIpO1xuXHR9XG5cblx0c3RhdGljIGdldCBzdXBwb3J0KClcblx0e1xuXHRcdHJldHVybiByZXF1aXJlKCdyZWdleHAtc3VwcG9ydCcpLmRlZmF1bHQgYXMgdHlwZW9mIGltcG9ydCgncmVnZXhwLXN1cHBvcnQnKS5kZWZhdWx0O1xuXHR9XG5cblx0c3RhdGljIGdldCB2ZXJzaW9uKCk6IHN0cmluZ1xuXHR7XG5cdFx0cmV0dXJuIHJlcXVpcmUoJy4vcGFja2FnZS5qc29uJykudmVyc2lvblxuXHR9XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgemhSZWdFeHBcbntcblx0ZXhwb3J0IGltcG9ydCBpc1JlZ0V4cCA9IFJlZ2V4cEhlbHBlci5pc1JlZ0V4cDtcbn1cblxuZXhwb3J0IGNvbnN0IGNyZWF0ZSA9IHpoUmVnRXhwLmNyZWF0ZS5iaW5kKHpoUmVnRXhwKSBhcyB0eXBlb2YgemhSZWdFeHAuY3JlYXRlO1xuXG5leHBvcnQgeyBpc1JlZ0V4cCwgcGFyc2VSZWd1bGFyRXhwcmVzc2lvblN0cmluZyB9XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUFwaTxUID0gemhSZWdFeHA+XG57XG5cdChzdHI6IHN0cmluZyB8IFJlZ0V4cCwgZmxhZ3M/OiBzdHJpbmcsIG9wdGlvbnM/OiBJT3B0aW9ucyB8IHN0cmluZyk6IFQsXG5cdChzdHI6IHN0cmluZyB8IFJlZ0V4cCwgb3B0aW9ucz86IElPcHRpb25zKTogVCxcbn1cblxuLy8gQHRzLWlnbm9yZVxuZXhwb3J0IGNvbnN0IHZlcnNpb246IHN0cmluZztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwidmVyc2lvblwiLCB7XG5cdGdldCgpXG5cdHtcblx0XHRyZXR1cm4gcmVxdWlyZSgnLi9wYWNrYWdlLmpzb24nKS52ZXJzaW9uXG5cdH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCB6aFJlZ0V4cDtcbiJdfQ==